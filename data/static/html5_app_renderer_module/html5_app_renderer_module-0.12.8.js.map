{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"kolibriGlobal\"","webpack:///external \"kolibriGlobal.utils.serverClock\"","webpack:///external \"kolibriGlobal.coreVue.mixins.themeMixin\"","webpack:///external \"kolibriGlobal.coreVue.mixins.contentRendererMixin\"","webpack:///external \"kolibriGlobal.coreVue.components.UiIconButton\"","webpack:///external \"kolibriGlobal.coreVue.components.CoreFullscreen\"","webpack:///external \"kolibriGlobal.urls\"","webpack:///./kolibri/plugins/html5_app_renderer/assets/src/views/Html5AppRendererIndex.vue?c3be","webpack:///./kolibri/plugins/html5_app_renderer/assets/src/views/Html5AppRendererIndex.vue?fd9a","webpack:///./packages/hashi/src/mediator.js","webpack:///./packages/hashi/src/hashiBase.js","webpack:///./packages/hashi/src/baseShim.js","webpack:///./packages/hashi/src/baseStorage.js","webpack:///./packages/hashi/src/localStorage.js","webpack:///./packages/hashi/src/cookie.js","webpack:///./packages/hashi/src/mainClient.js","webpack:///./kolibri/plugins/html5_app_renderer/assets/src/views/Html5AppRendererIndex.vue?0e68","webpack:///./kolibri/plugins/html5_app_renderer/assets/src/views/Html5AppRendererIndex.vue","webpack:///./kolibri/plugins/html5_app_renderer/assets/src/views/Html5AppRendererIndex.vue?afbe","webpack:///./kolibri/core/assets/src/utils/setWebpackPublicPath.js","webpack:///./node_modules/vue-loader/lib/runtime/componentNormalizer.js","webpack:///./kolibri/core/assets/src/kolibri_module.js","webpack:///./kolibri/core/assets/src/content_renderer_module.js","webpack:///./kolibri/plugins/html5_app_renderer/assets/src/module.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","kolibriGlobal","utils","serverClock","coreVue","mixins","themeMixin","contentRendererMixin","components","UiIconButton","CoreFullscreen","urls","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_4_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_4_2_node_modules_sass_loader_lib_loader_js_ref_4_3_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_svg_icon_inline_loader_index_js_Html5AppRendererIndex_vue_vue_type_style_index_0_id_fb9e43d6_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","Mediator","remote","this","local","window","addEventListener","handleMessage","__messageHandlers","ev","ref","data","nameSpace","event","forEach","callback","e","console","debug","sendLocalMessage","message","postMessage","sendMessage","registerMessageHandler","push","removeMessageHandler","const","index","indexOf","splice","src_mediator","events","READYCHECK","READY","STATEUPDATE","baseShim_BaseShim","mediator","__mediator","assign","setData","__setData","stateUpdated","on","values","includes","ReferenceError","off","internalKeys","BaseStorage","LocalStorage","super","constructor","BaseShim","setDataToShim","setDataFromShim","updatedData","updated","shimKeys","keys","shim","String","apply","concat","entries","filter","entry","map","obj","prop","iframeInitialize","__setShimInterface","configurable","self","Shim","length","getItem","keyName","setItem","removeItem","clear","baseShim","sessionOnly","Cookie","NOW","__clearData","__nowDiff","__setNowDiff","__getCookies","__setItem","__data","rootCookies","byPath","__removeExpiredCookies","output","filterCookies","sourceObj","out","Date","expires","__now","path","filtered","document","set","prototypeAccessors","now","nowDiff","setNow","getTime","pathname","location","join","valueString","parts","split","store","deleteCookie","pathRegex","maxAgeRegex","expiresRegex","slice","part","pathResult","exec","maxAgeResult","expiresResult","maxAge","Number","isNaN","expirationDate","__removeItem","mainClient_MainClient","iframe","contentWindow","storage","localStorage","cookie","ready","initialize","JSON","parse","stringify","mainClient_prototypeAccessors","onStateUpdate","views_Html5AppRendererIndexvue_type_script_lang_js_","external_kolibriGlobal_coreVue_components_UiIconButton_default","a","external_kolibriGlobal_coreVue_components_CoreFullscreen_default","external_kolibriGlobal_coreVue_mixins_contentRendererMixin_default","external_kolibriGlobal_coreVue_mixins_themeMixin_default","props","defaultFile","type","required","isInFullscreen","computed","rooturl","storage_url","mounted","hashi","mainClient","$refs","external_kolibriGlobal_utils_serverClock_","$emit","extraFields","contentState","startTime","pollProgress","beforeDestroy","timeout","clearTimeout","methods","recordProgress","totalTime","Math","max","setTimeout","$trs","exitFullscreen","enterFullscreen","Html5AppRendererIndex","scriptExports","render","staticRenderFns","functionalTemplate","injectStyles","scopeId","moduleIdentifier","shadowMode","hook","options","_compiled","functional","_scopeId","context","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","_registeredComponents","add","_ssrRegister","$root","$options","shadowRoot","_injectStyles","originalRender","h","existing","beforeCreate","normalizeComponent","_vm","_h","$createElement","_c","_self","staticClass","changeFullscreen","$event","style","fill","$themeTokens","textInverted","attrs","ariaLabel","$tr","color","size","click","html5Renderer","toggleFullscreen","role","focusable","xmlns","width","height","viewBox","backgroundColor","$themeColors","palette","grey","v_100","sandbox","frameBorder","src","static","KolibriModule","safeOptions","kolibriModuleOptions","option","args","_registerKolibriModule","kolibri_module_prototypeAccessors","external_kolibriGlobal_default","registerKolibriModuleSync","stopListening","method","emit","Kolibri","rendererComponent","contentTypes","loadDirectionalCSS","direction","__webpack_exports__","hTML5AppModule","ContentRendererModule","content_renderer_module"],"mappings":"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","file":"html5_app_renderer_module-0.12.8.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n","module.exports = kolibriGlobal;","module.exports = kolibriGlobal.utils.serverClock;","module.exports = kolibriGlobal.coreVue.mixins.themeMixin;","module.exports = kolibriGlobal.coreVue.mixins.contentRendererMixin;","module.exports = kolibriGlobal.coreVue.components.UiIconButton;","module.exports = kolibriGlobal.coreVue.components.CoreFullscreen;","module.exports = kolibriGlobal.urls;","import mod from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../node_modules/css-loader/index.js??ref--4-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/lib/index.js??ref--4-2!../../../../../../node_modules/sass-loader/lib/loader.js??ref--4-3!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/svg-icon-inline-loader/index.js!./Html5AppRendererIndex.vue?vue&type=style&index=0&id=fb9e43d6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../node_modules/css-loader/index.js??ref--4-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/lib/index.js??ref--4-2!../../../../../../node_modules/sass-loader/lib/loader.js??ref--4-3!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/svg-icon-inline-loader/index.js!./Html5AppRendererIndex.vue?vue&type=style&index=0&id=fb9e43d6&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('CoreFullscreen',{ref:\"html5Renderer\",staticClass:\"html5-renderer\",on:{\"changeFullscreen\":function($event){_vm.isInFullscreen = $event}}},[_c('UiIconButton',{staticClass:\"btn\",style:({ fill: _vm.$themeTokens.textInverted }),attrs:{\"ariaLabel\":_vm.isInFullscreen ? _vm.$tr('exitFullscreen') : _vm.$tr('enterFullscreen'),\"color\":\"primary\",\"size\":\"large\"},on:{\"click\":function($event){return _vm.$refs.html5Renderer.toggleFullscreen()}}},[(_vm.isInFullscreen)?_c('svg',{attrs:{\"role\":\"presentation\",\"focusable\":\"false\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\"}},[_c('path',{attrs:{\"d\":\"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z\"}})]):_c('svg',{attrs:{\"role\":\"presentation\",\"focusable\":\"false\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\"}},[_c('path',{attrs:{\"d\":\"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\"}})])]),_c('iframe',{ref:\"iframe\",staticClass:\"iframe\",style:({ backgroundColor: _vm.$themeColors.palette.grey.v_100 }),attrs:{\"sandbox\":\"allow-scripts\",\"frameBorder\":\"0\",\"name\":_vm.name,\"src\":_vm.rooturl}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\n * This class manages all message listening and sending from the postMessage\n * layer. All interfaces that need to message via the postMessage layer should\n * do so via an instance of this class.\n */\n\nclass Mediator {\n  constructor(remote) {\n    this.local = window;\n    this.remote = remote;\n    this.local.addEventListener('message', this.handleMessage.bind(this));\n    this.__messageHandlers = {};\n  }\n\n  handleMessage(ev) {\n    const { nameSpace, event, data } = ev.data;\n    // nameSpace and event should be defined, otherwise, it's not our message!\n    if (typeof nameSpace === 'undefined' || typeof event === 'undefined') {\n      return;\n    }\n    if (this.__messageHandlers[nameSpace] && this.__messageHandlers[nameSpace][event]) {\n      this.__messageHandlers[nameSpace][event].forEach(callback => {\n        try {\n          callback(data);\n        } catch (e) {\n          /* eslint-disable no-console */\n          console.debug(`Error while executing callback for ${nameSpace} for event ${event}`);\n          console.debug(e);\n          /* eslint-enable no-console */\n        }\n      });\n    }\n  }\n\n  sendLocalMessage({ event, data, nameSpace } = {}) {\n    const message = {\n      event,\n      data,\n      nameSpace,\n    };\n    this.local.postMessage(message, '*');\n  }\n\n  sendMessage({ event, data, nameSpace }) {\n    const message = {\n      event,\n      data,\n      nameSpace,\n    };\n    this.remote.postMessage(message, '*');\n  }\n\n  registerMessageHandler({ event, nameSpace, callback } = {}) {\n    if (\n      typeof callback !== 'function' ||\n      typeof event === 'undefined' ||\n      typeof nameSpace === 'undefined'\n    ) {\n      return;\n    }\n    if (!this.__messageHandlers[nameSpace]) {\n      this.__messageHandlers[nameSpace] = {};\n    }\n    if (!this.__messageHandlers[nameSpace][event]) {\n      this.__messageHandlers[nameSpace][event] = [];\n    }\n    this.__messageHandlers[nameSpace][event].push(callback);\n  }\n\n  removeMessageHandler({ event, nameSpace, callback } = {}) {\n    if (!this.__messageHandlers[nameSpace]) {\n      return;\n    }\n    if (!this.__messageHandlers[nameSpace][event]) {\n      return;\n    }\n    if (callback) {\n      const index = this.__messageHandlers[nameSpace][event].indexOf(callback);\n      if (index > -1) {\n        return this.__messageHandlers[nameSpace][event].splice(index, 1);\n      }\n    }\n    // no callback specified, remove all callbacks\n    this.__messageHandlers[nameSpace][event] = [];\n  }\n}\n\nexport default Mediator;\n","export const events = {\n  READYCHECK: 'readycheck',\n  READY: 'ready',\n  STATEUPDATE: 'stateupdate',\n};\n\nexport const nameSpace = 'hashi';\n","import { events } from './hashiBase';\n\nexport default class BaseShim {\n  constructor(mediator) {\n    this.__mediator = mediator;\n    this.events = Object.assign({}, events);\n  }\n\n  setData(data) {\n    this.__setData(data);\n    this.stateUpdated();\n  }\n\n  sendMessage(event, data) {\n    this.__mediator.sendMessage({ nameSpace: this.nameSpace, event, data });\n  }\n\n  on(event, callback) {\n    if (!Object.values(this.events).includes(event)) {\n      throw ReferenceError(`${event} is not a valid event name for ${this.nameSpace}`);\n    }\n    this.__mediator.registerMessageHandler({ nameSpace: this.nameSpace, event, callback });\n  }\n\n  off(event, callback) {\n    if (!Object.values(this.events).includes(event)) {\n      throw ReferenceError(`${event} is not a valid event name for ${this.nameSpace}`);\n    }\n    this.__mediator.removeMessageHandler({ nameSpace: this.nameSpace, event, callback });\n  }\n\n  stateUpdated() {\n    this.sendMessage(this.events.STATEUPDATE, this.data);\n  }\n}\n","/**\n * This class offers an API-compatible replacement for localStorage and sessionStorage\n * to be used when apps are run in sandbox mode.\n *\n * For more information, see: https://developer.mozilla.org/en-US/docs/Web/API/Storage\n */\nimport BaseShim from './baseShim';\n\n// List out all the keys that exist on the shim itself to\n// prevent accidental overwriting.\n// We need to set data on the shim object to allow checks\n// of object membership with 'in'\nconst internalKeys = ['length', 'key', 'getItem', 'setItem', 'removeItem', 'clear'];\n\nexport default class BaseStorage extends BaseShim {\n  constructor(mediator) {\n    super(mediator);\n    this.data = {};\n  }\n\n  __setData(data = {}) {\n    this.data = data;\n    this.setDataToShim();\n  }\n\n  /*\n   * Method to check any changes\n   * in shim properties, due to direct property setting\n   * deletion, etc. that has not gone through setItem or removeItem\n   */\n  setDataFromShim() {\n    const updatedData = Object.assign({}, this.data);\n    let updated = false;\n    const shimKeys = Object.keys(this.shim);\n    // Won't include the object methods\n    shimKeys.forEach(key => {\n      // Ignore internal keys\n      if (!internalKeys.includes(key)) {\n        const value = String(this.shim[key]);\n        if (this.data[key] !== value) {\n          updatedData[key] = value;\n          updated = true;\n        }\n      }\n    });\n    Object.keys(this.data).forEach(key => {\n      if (!shimKeys.includes(key) && !internalKeys.includes(key)) {\n        delete updatedData[key];\n        updated = true;\n      }\n    });\n    if (updated) {\n      this.__setData(updatedData);\n      this.stateUpdated();\n    }\n  }\n\n  setDataToShim() {\n    if (this.shim) {\n      // Assign all data that is not keyed by\n      // one of our built in object keys\n      // onto our shim object.\n      Object.assign(\n        this.shim,\n        ...Object.entries(this.data)\n          .filter(entry => !internalKeys.includes(entry[0]))\n          .map(entry => ({ [entry[0]]: entry[1] }))\n      );\n      // Now remove any keys on the shim that shouldn't be there now.\n      const shimProps = Object.keys(this.shim);\n      shimProps.forEach(prop => {\n        if (!this.data[prop]) {\n          delete this.shim[prop];\n        }\n      });\n    }\n  }\n\n  iframeInitialize() {\n    this.__setShimInterface();\n    Object.defineProperty(window, this.nameSpace, {\n      value: this.shim,\n      configurable: true,\n    });\n  }\n\n  __setShimInterface() {\n    const self = this;\n\n    class Shim {\n      get length() {\n        self.setDataFromShim();\n        return Object.keys(self.data).length;\n      }\n\n      key(index) {\n        self.setDataFromShim();\n        // Return null if no key defined, as per storage spec.\n        return Object.keys(self.data)[index] || null;\n      }\n\n      getItem(keyName) {\n        self.setDataFromShim();\n        // Return null if no key defined, as per storage spec.\n        return self.data[keyName] || null;\n      }\n\n      setItem(keyName, value) {\n        // Can only store strings in localStorage\n        // by default everything is coerced to a string\n        // We follow the API to spec\n        value = String(value);\n        self.data[keyName] = value;\n        // Also store the value on the instance itself,\n        // unless it would overwrite a method.\n        if (!internalKeys.includes(keyName)) {\n          this[keyName] = value;\n        }\n        self.stateUpdated();\n      }\n\n      removeItem(keyName) {\n        delete self.data[keyName];\n        // Also delete the key on the instance itself,\n        // unless it would overwrite a method.\n        if (!internalKeys.includes(keyName)) {\n          delete this[keyName];\n        }\n        self.stateUpdated();\n      }\n\n      clear() {\n        self.data = {};\n        self.stateUpdated();\n      }\n    }\n    this.shim = new Shim();\n\n    this.setDataToShim();\n\n    return this.shim;\n  }\n}\n","/**\n * This class offers an API-compatible replacement for localStorage\n * to be used when apps are run in sandbox mode.\n *\n * localStorage is persisted outside the sandboxed iframe in case it is needed for future sessions\n *\n * For more information, see: https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage\n */\nimport BaseStorage from './baseStorage';\n\nexport default class LocalStorage extends BaseStorage {\n  constructor(mediator) {\n    super(mediator);\n    this.nameSpace = 'localStorage';\n    this.__setData = this.__setData.bind(this);\n    this.on(this.events.STATEUPDATE, this.__setData);\n  }\n}\n","/**\n * This class offers an API-compatible replacement document.cookie\n * to be used when apps are run in sandbox mode.\n *\n * For more information, see: https://developer.mozilla.org/en-US/docs/Web/API/document/cookie\n */\nimport BaseShim from './baseShim';\n\n// Value to set on expires that will prevent this data from being persisted\nconst sessionOnly = 'session';\n\nexport default class Cookie extends BaseShim {\n  constructor(mediator) {\n    super(mediator);\n    Object.assign(this.events, {\n      NOW: 'now',\n    });\n    this.nameSpace = 'cookie';\n    this.__clearData();\n    this.__nowDiff = 0;\n    this.__setData = this.__setData.bind(this);\n    this.__setNowDiff = this.__setNowDiff.bind(this);\n    this.__getCookies = this.__getCookies.bind(this);\n    this.__setItem = this.__setItem.bind(this);\n    this.on(this.events.STATEUPDATE, this.__setData);\n    this.on(this.events.NOW, this.__setNowDiff);\n  }\n\n  __clearData() {\n    const defaultData = {\n      rootCookies: {},\n      byPath: {},\n    };\n    this.__data = Object.assign({}, defaultData);\n  }\n\n  __removeExpiredCookies(data) {\n    const output = {\n      rootCookies: {},\n      byPath: {},\n    };\n\n    const filterCookies = sourceObj => {\n      const out = {};\n      Object.keys(sourceObj).forEach(key => {\n        if (new Date(sourceObj[key].expires) > this.__now()) {\n          out[key] = sourceObj[key];\n        }\n      });\n      return out;\n    };\n    output.rootCookies = filterCookies(data.rootCookies);\n    Object.keys(data.byPath).forEach(path => {\n      const filtered = filterCookies(data.byPath[path]);\n      if (Object.keys(filtered).length) {\n        // Only bother assigning if any cookies actually remain\n        output.byPath[path] = filtered;\n      }\n    });\n    return output;\n  }\n\n  __setData(data) {\n    if (data && data.rootCookies && data.byPath) {\n      this.__data = this.__removeExpiredCookies(data);\n    } else {\n      this.__clearData();\n    }\n  }\n\n  iframeInitialize() {\n    Object.defineProperty(document, this.nameSpace, {\n      get: this.__getCookies,\n      set: this.__setItem,\n      // By definition, the interfaces we are overwriting are configurable\n      // Because otherwise we couldn't configure them.\n      // Make sure ours is also in case someone else is monkey patching,\n      // to avoid causing errors for their code.\n      configurable: true,\n    });\n  }\n\n  get data() {\n    // Return data that should be persisted across sessions\n    const data = {\n      rootCookies: {},\n      byPath: {},\n    };\n\n    function filterCookies(sourceObj) {\n      const output = {};\n      Object.keys(sourceObj).forEach(key => {\n        if (sourceObj[key].expires !== sessionOnly) {\n          output[key] = sourceObj[key];\n        }\n      });\n      return output;\n    }\n    data.rootCookies = filterCookies(this.__data.rootCookies);\n    Object.keys(this.__data.byPath).forEach(path => {\n      const filtered = filterCookies(this.__data.byPath[path]);\n      if (Object.keys(filtered).length) {\n        data.byPath[path] = filtered;\n      }\n    });\n    return this.__removeExpiredCookies(data);\n  }\n\n  // Because we are persisting data across multiple client devices\n  // it can be helpful to have a single source of truth for timestamps\n  // that we persist. As such, we allow the setting of a time difference\n  // to allow our Hashi internal timestamps to be set relative to the\n  // current time on the Kolibri server.\n  // This may be no more accurate than the time on the client device,\n  // but at least it is consistent across client devices.\n  __now() {\n    return new Date(Date.now() + this.__nowDiff);\n  }\n\n  __setNowDiff(nowDiff) {\n    this.__nowDiff = nowDiff;\n  }\n\n  setNow(now) {\n    this.__setNowDiff(new Date(now).getTime() - Date.now());\n    this.sendMessage(this.events.NOW, this.__nowDiff);\n  }\n\n  __getCookies() {\n    const data = Object.assign({}, this.__data.rootCookies);\n    const pathname = window.location.pathname;\n    // Add additional cookies by specific path if defined.\n    // Overwrite root set cookies.\n    if (this.__data.byPath[pathname]) {\n      Object.assign(data, this.__data.byPath[pathname]);\n    }\n    return Object.keys(data)\n      .map(key => `${key}=${data[key].value}`)\n      .join('; ');\n  }\n\n  __setItem(valueString = '') {\n    const parts = valueString.split(';');\n    if (parts[0]) {\n      const [key, value] = parts[0].split('=');\n      const store = {\n        value,\n        expires: sessionOnly,\n      };\n      let path;\n      let deleteCookie = false;\n      const pathRegex = /path=(.+)/;\n      const maxAgeRegex = /max-age=(.+)/;\n      const expiresRegex = /expires=(.+)/;\n      parts.slice(1).forEach(part => {\n        try {\n          const pathResult = pathRegex.exec(part);\n          const maxAgeResult = maxAgeRegex.exec(part);\n          const expiresResult = expiresRegex.exec(part);\n          if (pathResult) {\n            path = pathResult[1];\n          } else if (maxAgeResult) {\n            // Let the function level catch handle any errors from parsing as a Number\n            const maxAge = Number(maxAgeResult[1]);\n            if (isNaN(maxAge)) {\n              // Not a number, so just ignore this flag.\n              return;\n            } else if (maxAge > 0) {\n              store.expires = new Date(this.__now().getTime() + maxAge);\n            } else {\n              // If the max age is 0 or less, then expire the cookie\n              deleteCookie = true;\n            }\n          } else if (expiresResult) {\n            const expirationDate = new Date(expiresResult[1]);\n            if (isNaN(expirationDate)) {\n              // Parsed date is invalid\n              return;\n            } else if (expirationDate <= Date.now()) {\n              // The cookie is set to expire in the past, so delete it\n              deleteCookie = true;\n            } else {\n              // Expiration is set for some time in the future, so normalize it to\n              // our corrected now.\n              // Don't worry about how far in the future, as, at a minimum, this\n              // cookie should persist across this session.\n              store.expires = new Date(\n                this.__now().getTime() + (expirationDate.getTime() - Date.now())\n              );\n            }\n          }\n        } catch (e) {\n          // document.cookie setting is very forgiving and doesn't seem to throw errors\n          // even when completely nonsense values are passed to its optional arguments,\n          // so catch any errors here.\n        }\n      });\n      if (deleteCookie) {\n        this.__removeItem(key, path);\n      } else {\n        if (path) {\n          if (!this.__data.byPath[path]) {\n            this.__data.byPath[path] = {};\n          }\n          this.__data.byPath[path][key] = store;\n        } else {\n          this.__data.rootCookies[key] = store;\n        }\n      }\n      this.stateUpdated();\n    }\n  }\n\n  __removeItem(key, path) {\n    if (path) {\n      if (this.__data.byPath[path]) {\n        delete this.__data.byPath[path][key];\n        if (!Object.keys(this.__data.byPath[path]).length) {\n          // If this is the last remaining entry, delete the parent object\n          // To keep everything shipshape, and Bristol fashion!\n          delete this.__data.byPath[path];\n        }\n      }\n    } else {\n      delete this.__data.rootCookies[key];\n    }\n    this.stateUpdated();\n  }\n}\n","import Mediator from './mediator';\nimport LocalStorage from './localStorage';\nimport Cookie from './cookie';\nimport { events, nameSpace } from './hashiBase';\n\n/*\n * This is the main entry point for interacting with the Hashi library.\n * Import this client in order to wrap an iframe that has an instance of\n * the 'SandboxEnvironment' class (found inside iframeClient.js) inside of it.\n * When an iframe has been wrapped, then this class can be initialized to set initial\n * data, and allow the iframe to setup its own environment and start running\n * a contained HTML5 app.\n */\nexport default class MainClient {\n  constructor({ iframe, now } = {}) {\n    this.events = events;\n    this.iframe = iframe;\n    if (this.iframe.name !== nameSpace) {\n      throw ReferenceError(\n        `Iframe passed to Hashi must have been initialized with name attribute ${nameSpace}`\n      );\n    }\n    this.mediator = new Mediator(this.iframe.contentWindow);\n    this.storage = {\n      localStorage: new LocalStorage(this.mediator),\n      cookie: new Cookie(this.mediator),\n    };\n    this.now = now;\n    this.ready = false;\n    this.on(this.events.READY, () => {\n      this.ready = true;\n    });\n    this.__setData = this.__setData.bind(this);\n  }\n  initialize(data) {\n    // Make a quick copy of the data that is passed in.\n    // Can do this as all data that is coming in should be JSON\n    // compatible in the first place, if not, we have other problems.\n    data = JSON.parse(JSON.stringify(data || {}));\n    // Set this here, regardless of whether it is already ready or not\n    // in case the page inside the iframe navigates to a new page\n    // and hence has to reset its local state and reinitialize its\n    // SandboxEnvironment.\n    this.on(this.events.READY, () => {\n      this.__setData(data);\n    });\n    if (this.ready) {\n      this.__setData(data);\n    } else {\n      this.mediator.sendMessage({ nameSpace, event: events.READYCHECK, data: true });\n    }\n  }\n  __setData(data) {\n    Object.keys(this.storage).forEach(key => {\n      const storage = this.storage[key];\n      storage.setData(data[storage.nameSpace]);\n      storage.on(events.STATEUPDATE, () => {\n        this.mediator.sendLocalMessage({ nameSpace, event: events.STATEUPDATE, data: this.data });\n      });\n    });\n    if (this.now) {\n      this.storage.cookie.setNow(this.now());\n    }\n    this.mediator.sendMessage({ nameSpace, event: events.READY, data: true });\n  }\n  get data() {\n    const data = {};\n    Object.keys(this.storage).forEach(key => {\n      const storage = this.storage[key];\n      // Make a quick copy of the data that is being exposed\n      // to prevent direct access to the stored data.\n      data[storage.nameSpace] = JSON.parse(JSON.stringify(storage.data));\n    });\n    return data;\n  }\n  on(event, callback) {\n    if (!Object.values(events).includes(event)) {\n      throw ReferenceError(`${event} is not a valid event name for ${nameSpace}`);\n    }\n    this.mediator.registerMessageHandler({ nameSpace, event, callback });\n  }\n\n  onStateUpdate(callback) {\n    this.on(events.STATEUPDATE, callback);\n  }\n}\n","import mod from \"-!../../../../../../node_modules/buble-loader/index.js??ref--2!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/svg-icon-inline-loader/index.js!./Html5AppRendererIndex.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/buble-loader/index.js??ref--2!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/svg-icon-inline-loader/index.js!./Html5AppRendererIndex.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport themeMixin from 'kolibri.coreVue.mixins.themeMixin';\nimport contentRendererMixin from 'kolibri.coreVue.mixins.contentRendererMixin';\nimport { now } from 'kolibri.utils.serverClock';\nimport UiIconButton from 'kolibri.coreVue.components.UiIconButton';\nimport CoreFullscreen from 'kolibri.coreVue.components.CoreFullscreen';\nimport Hashi from 'hashi';\nimport { nameSpace } from 'hashi/src/hashiBase';\n\nexport default {\n  name: 'Html5AppRendererIndex',\n  components: {\n    UiIconButton,\n    CoreFullscreen,\n  },\n  mixins: [contentRendererMixin, themeMixin],\n  props: {\n    defaultFile: {\n      type: Object,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      isInFullscreen: false,\n    };\n  },\n  computed: {\n    name() {\n      return nameSpace;\n    },\n    rooturl() {\n      return this.defaultFile.storage_url;\n    },\n  },\n  mounted() {\n    this.hashi = new Hashi({ iframe: this.$refs.iframe, now });\n    this.hashi.onStateUpdate(data => {\n      this.$emit('updateContentState', data);\n    });\n    this.hashi.initialize((this.extraFields && this.extraFields.contentState) || {});\n    this.$emit('startTracking');\n    this.startTime = now();\n    this.pollProgress();\n  },\n  beforeDestroy() {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n    }\n    this.$emit('stopTracking');\n  },\n  methods: {\n    recordProgress() {\n      const totalTime = now() - this.startTime;\n      this.$emit('updateProgress', Math.max(0, totalTime / 300000));\n      this.pollProgress();\n    },\n    pollProgress() {\n      this.timeout = setTimeout(() => {\n        this.recordProgress();\n      }, 15000);\n    },\n  },\n  $trs: {\n    exitFullscreen: 'Exit fullscreen',\n    enterFullscreen: 'Enter fullscreen',\n  },\n};\n\n","import { render, staticRenderFns } from \"./Html5AppRendererIndex.vue?vue&type=template&id=fb9e43d6&scoped=true&\"\nimport script from \"./Html5AppRendererIndex.vue?vue&type=script&lang=js&\"\nexport * from \"./Html5AppRendererIndex.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Html5AppRendererIndex.vue?vue&type=style&index=0&id=fb9e43d6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fb9e43d6\",\n  null\n  \n)\n\nexport default component.exports","export default function setWebpackPublicPath(urls) {\n  if (process.env.NODE_ENV === 'production') {\n    /* eslint-disable no-undef */\n    __webpack_public_path__ = urls.static(`${__kolibriModuleName}/`);\n    /* eslint-enable */\n  }\n}\n","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nexport default function normalizeComponent (\n  scriptExports,\n  render,\n  staticRenderFns,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier, /* server only */\n  shadowMode /* vue-cli only */\n) {\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (render) {\n    options.render = render\n    options.staticRenderFns = staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = 'data-v-' + scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = shadowMode\n      ? function () { injectStyles.call(this, this.$root.$options.shadowRoot) }\n      : injectStyles\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functioal component in vue file\n      var originalRender = options.render\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return originalRender(h, context)\n      }\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    }\n  }\n\n  return {\n    exports: scriptExports,\n    options: options\n  }\n}\n","/**\n * KolibriModule module.\n * Provides the base class for Kolibri Modules - all Kolibri Modules must extend this Base class.\n * @module kolibriModule\n */\n\nimport coreApp from 'kolibri';\nimport urls from 'kolibri.urls';\nimport setWebpackPublicPath from './utils/setWebpackPublicPath';\n\n// Do this to set a public path for this module\nsetWebpackPublicPath(urls);\n\nexport default class KolibriModule {\n  /**\n   * An array of options to select from the options object passed into the constructor.\n   * @type {string[]}\n   */\n  get kolibriModuleOptions() {\n    return [];\n  }\n  /**\n   * The constructor function for the base KolibriModule object.\n   * @param {object} options - an options hash to set properties of the object.\n   * @param {Array} args - any additional arguments that will be passed to initialize.\n   * @constructor\n   */\n  constructor(options, ...args) {\n    /* eslint-disable no-undef */\n    // __kolibriModuleName is replaced during webpack compilation with the name derived from\n    // the Python module name and the name of the class that defines the frontend kolibriModule.\n    this.name = __kolibriModuleName;\n    /* eslint-enable no-undef */\n    const safeOptions = {};\n    this.kolibriModuleOptions.forEach(option => {\n      if (options[option]) {\n        safeOptions[option] = options[option];\n      }\n    });\n    Object.assign(this, safeOptions);\n    // Pass all arguments to the constructor directly to initialize for easy access.\n    this.initialize(options, ...args);\n    // Register the kolibriModule with the Kolibri core app.\n    this._registerKolibriModule();\n  }\n\n  /**\n   * Method to automatically register the kolibriModule with the Kolibri core app once it has\n   * initialized.\n   * @private\n   */\n  _registerKolibriModule() {\n    coreApp.registerKolibriModuleSync(this);\n  }\n\n  /**\n   * A dummy initialization function - this function will be passed anything passed to the\n   * constructor.\n   * Useful for setting up the kolibriModule before it is registered against the Kolibri core app.\n   */\n  initialize() {}\n\n  /**\n   * A dummy ready function\n   * Useful for initiating behaviour of the kolibriModule after it is registered against the\n   * Kolibri core app.\n   */\n  ready() {}\n\n  /**\n   * Convenience method to unregister the kolibriModule from listening to certain events.\n   * @param {string} event - the event name\n   * @param {string} method - the name of the method to unbind\n   */\n  stopListening(event, method) {\n    coreApp.stopListening(event, this, method);\n  }\n\n  /**\n   * Convenience method to fire an event on the global Mediator and pass in a data payload.\n   * @param {string} event - the event name\n   * @param {Array} args - additional arguments to the event handler.\n   */\n  emit(...args) {\n    coreApp.emit(...args);\n  }\n  get Kolibri() {\n    return coreApp;\n  }\n}\n","import KolibriModule from 'kolibri_module';\n\nexport default class ContentRenderer extends KolibriModule {\n  get rendererComponent() {\n    return null;\n  }\n  get contentTypes() {\n    return null;\n  }\n  loadDirectionalCSS(direction) {\n    return this.Kolibri.loadDirectionalCSS(this, direction);\n  }\n}\n","import HTML5AppComponent from './views/Html5AppRendererIndex';\nimport ContentRendererModule from 'content_renderer_module';\n\nclass HTML5AppModule extends ContentRendererModule {\n  get rendererComponent() {\n    return HTML5AppComponent;\n  }\n}\n\nconst hTML5AppModule = new HTML5AppModule();\n\nexport { hTML5AppModule as default };\n"],"sourceRoot":""}